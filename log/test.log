[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_version_test"[0m
  [1m[35m (81.4ms)[0m  [1m[35mCREATE DATABASE "rails_version_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (19.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "events" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "events" ("id" bigserial primary key, "datetime" timestamp(6) NOT NULL, "event_type" character varying NOT NULL, "location" character varying, "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_events_on_datetime" ON "events" ("datetime")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_events_on_event_type" ON "events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "finances" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "finances" ("id" bigserial primary key, "user_id" bigint NOT NULL, "amount" decimal(10,2) NOT NULL, "notes" text, "transaction_type" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_finances_on_created_at" ON "finances" ("created_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_finances_on_transaction_type" ON "finances" ("transaction_type")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_finances_on_user_id" ON "finances" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "username" character varying NOT NULL, "email" character varying NOT NULL, "password_digest" character varying, "access_level" character varying DEFAULT 'player' NOT NULL, "position" character varying, "chain" character varying, "car" boolean DEFAULT FALSE NOT NULL, "location" character varying, "balance" decimal(10,2) DEFAULT -100.0 NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_users_on_access_level" ON "users" ("access_level")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_username" ON "users" ("username")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "finances" ADD CONSTRAINT "fk_rails_9740b85de3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250714041551)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250710094935),
(20250709044448),
(20250708094512),
(20250708000000),
(20250707115700),
(20250707093431),
(20250707092040),
(20250703092021);[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-14 04:26:48.699207', '2025-07-14 04:26:48.699209') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'dd124c790e6f3eaa2017bd4f94a7e199310886c2', '2025-07-14 04:26:48.705044', '2025-07-14 04:26:48.705045') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:27:59.961158', '2025-07-14 04:27:59.961158'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:27:59.961158', '2025-07-14 04:27:59.961158');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:27:59.965610', '2025-07-14 04:27:59.965610', 'test_user_one', 'user1@example.com', '$2a$12$qQhlcxzmksccVz91Bbmb1e1jRcQkrBaKKp0cZRyLA73dOYDbKLqEu', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:27:59.965610', '2025-07-14 04:27:59.965610', 'test_user_two', 'user2@example.com', '$2a$12$zbD9FmoJH0Cr7GYVYyemoOEslKwr.g7BCM5c.qOpg6nu2SCms.sfG', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:00.321811', '2025-07-14 04:28:00.321811'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:00.321811', '2025-07-14 04:28:00.321811');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:00.321911', '2025-07-14 04:28:00.321911', 'test_user_one', 'user1@example.com', '$2a$12$U/e59gVshoQoghJmwEnSz.51e.xWhpNLOvKfW8IY6iBxEhffzMGyy', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:00.321911', '2025-07-14 04:28:00.321911', 'test_user_two', 'user2@example.com', '$2a$12$dp2yhfysnVBrfzg09shtWe5bKYvwvAg0MPQq2RIReuhSxDsrvadPG', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:00.691798', '2025-07-14 04:28:00.691798'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:00.691798', '2025-07-14 04:28:00.691798');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:00.691894', '2025-07-14 04:28:00.691894', 'test_user_one', 'user1@example.com', '$2a$12$KReHWhP1L7EX5KCwpX7douUYKdYNRfT.HZoBiBk6/5wLxld.dyNVG', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:00.691894', '2025-07-14 04:28:00.691894', 'test_user_two', 'user2@example.com', '$2a$12$dRvblAesy17xyDd6gv5gTeslorGvQ4gAW3ncgzd914xYRd3W9auSS', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:01.055471', '2025-07-14 04:28:01.055471'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:01.055471', '2025-07-14 04:28:01.055471');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:01.055566', '2025-07-14 04:28:01.055566', 'test_user_one', 'user1@example.com', '$2a$12$2PZ4KODm9Pm.iTu8y8af9OZkleUj34jyCZysU8AzcWbnwM1RycEOe', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:01.055566', '2025-07-14 04:28:01.055566', 'test_user_two', 'user2@example.com', '$2a$12$oAbckie1ZS0aR.xZNjKSuueiY/jLEtJEL8eTsE2GLfopPq6OwjmTu', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:01.409664', '2025-07-14 04:28:01.409664'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:01.409664', '2025-07-14 04:28:01.409664');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:01.409759', '2025-07-14 04:28:01.409759', 'test_user_one', 'user1@example.com', '$2a$12$lsvbRH2hHByHdE7cxGWjFuhv/fhHe2mFiUqR5r714gN.CIVWAP0JS', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:01.409759', '2025-07-14 04:28:01.409759', 'test_user_two', 'user2@example.com', '$2a$12$fwXuERMPNP8paTWkBQkEHu0AxWfU2tpy0NZqMv0WiZ0av0sMYObJ.', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:01.770718', '2025-07-14 04:28:01.770718'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:01.770718', '2025-07-14 04:28:01.770718');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:01.770817', '2025-07-14 04:28:01.770817', 'test_user_one', 'user1@example.com', '$2a$12$P.S./JRbAG1s6uG61dCYXupO5Y2d7VtFY94r1a25mhhfhOK0YmezO', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:01.770817', '2025-07-14 04:28:01.770817', 'test_user_two', 'user2@example.com', '$2a$12$SkIILXLKCrETsbofufbWeeCFn3UO7z8ESeSq/CJxfjGEOVmuxZtkS', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:02.126831', '2025-07-14 04:28:02.126831'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:02.126831', '2025-07-14 04:28:02.126831');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:02.126927', '2025-07-14 04:28:02.126927', 'test_user_one', 'user1@example.com', '$2a$12$ityn.Q8l3Ffo3V2YFUiHz.SZScjh1X5FDy5peTH4VrdkS46GkEtGG', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:02.126927', '2025-07-14 04:28:02.126927', 'test_user_two', 'user2@example.com', '$2a$12$JlG7Qm4eC09LOSDNnTvlVuoKIZANcFYultjn8b4s77H.UXLFwFMOC', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-14 04:28:02.481361', '2025-07-14 04:28:02.481361'), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-14 04:28:02.481361', '2025-07-14 04:28:02.481361');
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-14 04:28:02.481462', '2025-07-14 04:28:02.481462', 'test_user_one', 'user1@example.com', '$2a$12$od.Xe41b3GP7Tlgub3MCv.8gmQiNzQRKbDNzyoMQhlWAcMU.CA4Zu', 'player', 'Forward', 'Chain1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-14 04:28:02.481462', '2025-07-14 04:28:02.481462', 'test_user_two', 'user2@example.com', '$2a$12$u5xBuyg.Am7CU1WbApv3wO7GyB23TdmNVBFuI.9kJ9xmcqXRRpsTu', 'admin', 'Manager', 'Chain2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (3.9ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:57:43.842333', '2025-07-22 04:57:43.842333', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:57:43.842333', '2025-07-22 04:57:43.842333', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:57:43.855240', '2025-07-22 04:57:43.855240', 'test_user_one', 'user1@example.com', '$2a$12$fRBXCGcl52rBLdZQxqZqb.iHpkfzMJZBHVytMHWfjC1LYZQBleZUq', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:57:43.855240', '2025-07-22 04:57:43.855240', 'test_user_two', 'user2@example.com', '$2a$12$qWAPx/nb/YAVgx4Ib/ZrPOVtzRj.KlbSDWNKqpcAopIVDh10BAc5.', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:57:44.615311', '2025-07-22 04:57:44.615311', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:57:44.615311', '2025-07-22 04:57:44.615311', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:57:44.615414', '2025-07-22 04:57:44.615414', 'test_user_one', 'user1@example.com', '$2a$12$PcVhzGwmCdC7fnMmbbw1L.50QQ/OgaLB38Hf7NFtL7jfObkKAdh.6', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:57:44.615414', '2025-07-22 04:57:44.615414', 'test_user_two', 'user2@example.com', '$2a$12$T4e8Y3.PdyROrg2.8QKLaezjxPCzrVGckhCb1xtm9I3PnAAxOOloy', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:57:45.318691', '2025-07-22 04:57:45.318691', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:57:45.318691', '2025-07-22 04:57:45.318691', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:57:45.318801', '2025-07-22 04:57:45.318801', 'test_user_one', 'user1@example.com', '$2a$12$LX/VBdYS0gEHWMThtlzLiOl9Uzx8O0Ct01k9QlWQuGF/2vomqhXfi', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:57:45.318801', '2025-07-22 04:57:45.318801', 'test_user_two', 'user2@example.com', '$2a$12$BVL4b9HwfIMvtzI33nmLw.kd46ad6SyjFqUuson5crgc2lqcfYmhi', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:57:46.033728', '2025-07-22 04:57:46.033728', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:57:46.033728', '2025-07-22 04:57:46.033728', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:57:46.033833', '2025-07-22 04:57:46.033833', 'test_user_one', 'user1@example.com', '$2a$12$dKFSoMdhI7SBH.8gdQSPsuD4NaXTdFMVQ.xZ7lRJm0l4.W1FOu70e', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:57:46.033833', '2025-07-22 04:57:46.033833', 'test_user_two', 'user2@example.com', '$2a$12$8NKMuDOU970K2P1uaETeCO7sGkF7f/XahJ2gz8/ZeUu8kjDuUGQya', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:57:59.678849', '2025-07-22 04:57:59.678849', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:57:59.678849', '2025-07-22 04:57:59.678849', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:57:59.683469', '2025-07-22 04:57:59.683469', 'test_user_one', 'user1@example.com', '$2a$12$asJXjnVlD48bNiAw96JuqOk7zvg9XxB07PStNoyUSTm6vgJkmLFb6', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:57:59.683469', '2025-07-22 04:57:59.683469', 'test_user_two', 'user2@example.com', '$2a$12$hdIKHZe5DIdJKtgxZQ/hS.w0HdtFbkyKCkm6ciCwE0hsgtWbYvvX.', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:58:00.401831', '2025-07-22 04:58:00.401831', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:58:00.401831', '2025-07-22 04:58:00.401831', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:58:00.401930', '2025-07-22 04:58:00.401930', 'test_user_one', 'user1@example.com', '$2a$12$Hp17Nn4QsmjvxTdAUZPOFe/YdWTo4zn9dgGx/8hbzxkV3gats7d1K', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:58:00.401930', '2025-07-22 04:58:00.401930', 'test_user_two', 'user2@example.com', '$2a$12$OdjCQl7DP4.6hlLHQw9AbOpMtydc.RSUlSXNRhCRdWvcsywwURjva', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:58:01.104613', '2025-07-22 04:58:01.104613', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:58:01.104613', '2025-07-22 04:58:01.104613', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:58:01.104709', '2025-07-22 04:58:01.104709', 'test_user_one', 'user1@example.com', '$2a$12$2auhW8vmJnrC4wZGZKXqjuWITGF/VSQg3dU528KxKLbfUeVia5bz2', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:58:01.104709', '2025-07-22 04:58:01.104709', 'test_user_two', 'user2@example.com', '$2a$12$AVqgBelVQTe2eSSvbzrk3Op2CqjRmKnFqov4bewigIOW5LQQSn7.G', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "events" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "finances" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK AND CHAIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "finances";
DELETE FROM "users";
INSERT INTO "finances" ("id", "user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES (980190962, 980190962, 50.0, 'Test payment transaction', 'payment', '2025-07-22 04:58:01.811373', '2025-07-22 04:58:01.811373', DEFAULT, DEFAULT), (298486374, 298486374, -25.0, 'Test deduction transaction', 'deduction', '2025-07-22 04:58:01.811373', '2025-07-22 04:58:01.811373', DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES (980190962, '2025-07-22 04:58:01.811489', '2025-07-22 04:58:01.811489', 'test_user_one', 'user1@example.com', '$2a$12$si3a4iZA12crSiSf63.QSOJ47DeKWwg08FfQkfywTHBVLWFU5q3P2', 'player', 'Forward', '1', FALSE, 'Helsinki', 100.0), (298486374, '2025-07-22 04:58:01.811489', '2025-07-22 04:58:01.811489', 'test_user_two', 'user2@example.com', '$2a$12$I7drgrEeweNK6EKwKJGJoe6lhWr3seMiwIHm7i6l.jOuYFmIktGJW', 'admin', 'Manager', '2', TRUE, 'Turku', 300.0)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
HubControllerTest: test_hub_should_filter_out_current_user_from_roster
----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (1.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_199"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.774735"], ["updated_at", "2025-07-22 04:58:48.774735"], ["username", "testuser_199"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_597"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.781762"], ["updated_at", "2025-07-22 04:58:48.781762"], ["username", "testuser_597"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_151"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.788126"], ["updated_at", "2025-07-22 04:58:48.788126"], ["username", "testuser_151"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_343"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.793648"], ["updated_at", "2025-07-22 04:58:48.793648"], ["username", "testuser_343"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 12ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 1], [nil, 1], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 1], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 1], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 1]]
  Rendered hub/index.html.erb within layouts/application (Duration: 19.7ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | GC: 0.3ms)
Completed 200 OK in 34ms (Views: 22.4ms | ActiveRecord: 4.1ms (7 queries, 1 cached) | GC: 0.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 1], [nil, 1], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 1], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 1], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 1]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
HubControllerTest: test_should_redirect_to_login_when_not_authenticated
-----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_607"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.924489"], ["updated_at", "2025-07-22 04:58:48.924489"], ["username", "testuser_607"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_166"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.928215"], ["updated_at", "2025-07-22 04:58:48.928215"], ["username", "testuser_166"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
HubControllerTest: test_should_load_required_data_for_hub
---------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_117"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.939101"], ["updated_at", "2025-07-22 04:58:48.939101"], ["username", "testuser_117"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_792"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.943220"], ["updated_at", "2025-07-22 04:58:48.943220"], ["username", "testuser_792"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.9ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 04:58:48.944701"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 04:58:48.945226"], ["updated_at", "2025-07-22 04:58:48.945226"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_183"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:48.950535"], ["updated_at", "2025-07-22 04:58:48.950535"], ["username", "testuser_183"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 7], [nil, 7], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 7], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 7], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 7]]
  Rendered hub/index.html.erb within layouts/application (Duration: 6.7ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.5ms)
Completed 200 OK in 35ms (Views: 5.8ms | ActiveRecord: 1.9ms (9 queries, 1 cached) | GC: 26.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:48 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 7], [nil, 7], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 7], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 7], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 7]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.2ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.4ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.0ms (9 queries, 9 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubControllerTest: test_should_show_hub_when_authenticated
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_869"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:49.006385"], ["updated_at", "2025-07-22 04:58:49.006385"], ["username", "testuser_869"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_226"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:58:49.008991"], ["updated_at", "2025-07-22 04:58:49.008991"], ["username", "testuser_226"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:58:49 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:49 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 10], [nil, 10], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 10], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 10], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 10]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.9ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.3ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.6ms (7 queries, 1 cached) | GC: 0.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:58:49 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 10], [nil, 10], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 10], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 10], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 10]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.3ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
HubControllerTest: test_hub_should_filter_out_current_user_from_roster
----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_792"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.412678"], ["updated_at", "2025-07-22 04:59:19.412678"], ["username", "testuser_792"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_464"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.415724"], ["updated_at", "2025-07-22 04:59:19.415724"], ["username", "testuser_464"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_681"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.418365"], ["updated_at", "2025-07-22 04:59:19.418365"], ["username", "testuser_681"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_811"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.420396"], ["updated_at", "2025-07-22 04:59:19.420396"], ["username", "testuser_811"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 7ms (ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 12], [nil, 12], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 12], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 12], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 12]]
  Rendered hub/index.html.erb within layouts/application (Duration: 11.1ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | GC: 0.9ms)
Completed 200 OK in 22ms (Views: 13.1ms | ActiveRecord: 3.9ms (7 queries, 1 cached) | GC: 1.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 12], [nil, 12], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 12], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 12], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 12]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
HubControllerTest: test_should_redirect_to_login_when_not_authenticated
-----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_789"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.531915"], ["updated_at", "2025-07-22 04:59:19.531915"], ["username", "testuser_789"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_992"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.534324"], ["updated_at", "2025-07-22 04:59:19.534324"], ["username", "testuser_992"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
HubControllerTest: test_should_load_required_data_for_hub
---------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_825"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.544318"], ["updated_at", "2025-07-22 04:59:19.544318"], ["username", "testuser_825"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_115"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.549034"], ["updated_at", "2025-07-22 04:59:19.549034"], ["username", "testuser_115"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 04:59:19.550672"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 04:59:19.551220"], ["updated_at", "2025-07-22 04:59:19.551220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_650"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.555549"], ["updated_at", "2025-07-22 04:59:19.555549"], ["username", "testuser_650"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 18], [nil, 18], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 18], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 18], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 18]]
  Rendered hub/index.html.erb within layouts/application (Duration: 8.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.7ms | ActiveRecord: 1.9ms (9 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 18], [nil, 18], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 18], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 18], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 18]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.1ms (9 queries, 9 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubControllerTest: test_should_show_hub_when_authenticated
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_421"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.588310"], ["updated_at", "2025-07-22 04:59:19.588310"], ["username", "testuser_421"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_397"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:19.591660"], ["updated_at", "2025-07-22 04:59:19.591660"], ["username", "testuser_397"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 21], [nil, 21], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 21], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 21], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 21]]
  Rendered hub/index.html.erb within layouts/application (Duration: 7.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 1.6ms (7 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:19 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 21], [nil, 21], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 21], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 21], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 21]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.1ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
HubControllerTest: test_should_redirect_to_login_when_not_authenticated
-----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.267099"], ["updated_at", "2025-07-22 04:59:41.267099"], ["username", "testuser_47"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_387"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.273202"], ["updated_at", "2025-07-22 04:59:41.273202"], ["username", "testuser_387"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.8ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
HubControllerTest: test_should_load_required_data_for_hub
---------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_603"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.361521"], ["updated_at", "2025-07-22 04:59:41.361521"], ["username", "testuser_603"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_968"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.366896"], ["updated_at", "2025-07-22 04:59:41.366896"], ["username", "testuser_968"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 04:59:41.369190"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 04:59:41.376157"], ["updated_at", "2025-07-22 04:59:41.376157"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_645"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.379680"], ["updated_at", "2025-07-22 04:59:41.379680"], ["username", "testuser_645"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 5ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 25], [nil, 25], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 25], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 25], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 25]]
  Rendered hub/index.html.erb within layouts/application (Duration: 19.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 0.7ms)
Completed 200 OK in 39ms (Views: 23.3ms | ActiveRecord: 6.2ms (9 queries, 1 cached) | GC: 1.2ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 25], [nil, 25], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 25], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 25], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 25]]
  Rendered hub/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.1ms (9 queries, 9 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubControllerTest: test_should_show_hub_when_authenticated
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_671"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.451930"], ["updated_at", "2025-07-22 04:59:41.451930"], ["username", "testuser_671"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_511"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.456176"], ["updated_at", "2025-07-22 04:59:41.456176"], ["username", "testuser_511"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 28], [nil, 28], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 28], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 28], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 28]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.7ms (7 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 28], [nil, 28], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 28], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 28], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 28]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
HubControllerTest: test_hub_should_filter_out_current_user_from_roster
----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_163"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.476301"], ["updated_at", "2025-07-22 04:59:41.476301"], ["username", "testuser_163"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_345"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.478644"], ["updated_at", "2025-07-22 04:59:41.478644"], ["username", "testuser_345"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_50"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.481095"], ["updated_at", "2025-07-22 04:59:41.481095"], ["username", "testuser_50"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_921"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 04:59:41.483732"], ["updated_at", "2025-07-22 04:59:41.483732"], ["username", "testuser_921"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 30], [nil, 30], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 30], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 30], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 30]]
  Rendered hub/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.2ms (7 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 07:59:41 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 30], [nil, 30], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 30], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 30], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 30]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_954"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:29.886969"], ["updated_at", "2025-07-22 05:04:29.886969"], ["username", "testuser_954"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_302"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:29.892137"], ["updated_at", "2025-07-22 05:04:29.892137"], ["username", "testuser_302"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:04:29.894132"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:04:29.898847"], ["updated_at", "2025-07-22 05:04:29.898847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_70"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:29.902743"], ["updated_at", "2025-07-22 05:04:29.902743"], ["username", "testuser_70"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:04:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:04:29 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 34], [nil, 34], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 34], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 34], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 34]]
  Rendered hub/index.html.erb within layouts/application (Duration: 12.2ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | GC: 0.1ms)
Completed 200 OK in 24ms (Views: 14.4ms | ActiveRecord: 3.2ms (9 queries, 1 cached) | GC: 0.5ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_728"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:29.987653"], ["updated_at", "2025-07-22 05:04:29.987653"], ["username", "testuser_728"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_480"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:29.990144"], ["updated_at", "2025-07-22 05:04:29.990144"], ["username", "testuser_480"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:04:29 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:04:29 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_309"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:30.001736"], ["updated_at", "2025-07-22 05:04:30.001736"], ["username", "testuser_309"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_341"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:30.004598"], ["updated_at", "2025-07-22 05:04:30.004598"], ["username", "testuser_341"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:04:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:04:30 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 39], [nil, 39], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 39], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 39], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 39]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 0.9ms (7 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_681"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:49.179080"], ["updated_at", "2025-07-22 05:04:49.179080"], ["username", "testuser_681"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_680"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:49.182836"], ["updated_at", "2025-07-22 05:04:49.182836"], ["username", "testuser_680"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:04:49.183921"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:04:49.187806"], ["updated_at", "2025-07-22 05:04:49.187806"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_448"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:04:49.190193"], ["updated_at", "2025-07-22 05:04:49.190193"], ["username", "testuser_448"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:04:49 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:04:49 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.8ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 41], [nil, 41], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 41], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 41], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 41]]
  Rendered hub/index.html.erb within layouts/application (Duration: 20.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.7ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 23.4ms | ActiveRecord: 4.9ms (9 queries, 1 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_836"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.502992"], ["updated_at", "2025-07-22 05:05:45.502992"], ["username", "testuser_836"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_276"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.506104"], ["updated_at", "2025-07-22 05:05:45.506104"], ["username", "testuser_276"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 9ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 2.2ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (1.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 44], [nil, 44], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 44], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 44], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 44]]
  Rendered hub/index.html.erb within layouts/application (Duration: 19.6ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 24.4ms | GC: 1.2ms)
Completed 200 OK in 35ms (Views: 21.7ms | ActiveRecord: 6.0ms (7 queries, 1 cached) | GC: 2.1ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_563"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.633182"], ["updated_at", "2025-07-22 05:05:45.633182"], ["username", "testuser_563"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_674"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.637966"], ["updated_at", "2025-07-22 05:05:45.637966"], ["username", "testuser_674"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_609"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.657831"], ["updated_at", "2025-07-22 05:05:45.657831"], ["username", "testuser_609"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_404"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.662673"], ["updated_at", "2025-07-22 05:05:45.662673"], ["username", "testuser_404"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (1.1ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:05:45.664064"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:05:45.664591"], ["updated_at", "2025-07-22 05:05:45.664591"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:05:45.669261"], ["updated_at", "2025-07-22 05:05:45.669261"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:05:45 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 48], [nil, 48], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 48], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 48], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 48]]
  Rendered hub/index.html.erb within layouts/application (Duration: 9.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 2.1ms (9 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_159"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:06.655552"], ["updated_at", "2025-07-22 05:06:06.655552"], ["username", "testuser_159"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:06.659830"], ["updated_at", "2025-07-22 05:06:06.659830"], ["username", "testuser_40"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:06:06.661967"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:06:06.666531"], ["updated_at", "2025-07-22 05:06:06.666531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:06.669954"], ["updated_at", "2025-07-22 05:06:06.669954"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:06:06 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:06 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 51], [nil, 51], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 51], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 51], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 51]]
  Rendered hub/index.html.erb within layouts/application (Duration: 10.7ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | GC: 0.1ms)
Completed 200 OK in 22ms (Views: 13.0ms | ActiveRecord: 2.7ms (9 queries, 1 cached) | GC: 0.5ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_498"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.283864"], ["updated_at", "2025-07-22 05:06:33.283864"], ["username", "testuser_498"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_121"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.288282"], ["updated_at", "2025-07-22 05:06:33.288282"], ["username", "testuser_121"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:06:33.289864"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:06:33.293932"], ["updated_at", "2025-07-22 05:06:33.293932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.297511"], ["updated_at", "2025-07-22 05:06:33.297511"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.4ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 54], [nil, 54], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 54], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 54], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 54]]
  Rendered hub/index.html.erb within layouts/application (Duration: 10.0ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | GC: 0.1ms)
Completed 200 OK in 22ms (Views: 12.4ms | ActiveRecord: 2.7ms (9 queries, 1 cached) | GC: 0.5ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_949"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.396864"], ["updated_at", "2025-07-22 05:06:33.396864"], ["username", "testuser_949"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_339"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.399584"], ["updated_at", "2025-07-22 05:06:33.399584"], ["username", "testuser_339"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_31"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.410562"], ["updated_at", "2025-07-22 05:06:33.410562"], ["username", "testuser_31"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_386"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:33.413564"], ["updated_at", "2025-07-22 05:06:33.413564"], ["username", "testuser_386"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:33 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 59], [nil, 59], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 59], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 59], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 59]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.8ms (7 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_62"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.130210"], ["updated_at", "2025-07-22 05:06:54.130210"], ["username", "testuser_62"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_754"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.134880"], ["updated_at", "2025-07-22 05:06:54.134880"], ["username", "testuser_754"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 9ms (ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.6ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 61], [nil, 61], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 61], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 61], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 61]]
  Rendered hub/index.html.erb within layouts/application (Duration: 12.2ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.2ms)
Completed 200 OK in 28ms (Views: 14.8ms | ActiveRecord: 3.7ms (7 queries, 1 cached) | GC: 0.8ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_670"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.251334"], ["updated_at", "2025-07-22 05:06:54.251334"], ["username", "testuser_670"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_706"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.256537"], ["updated_at", "2025-07-22 05:06:54.256537"], ["username", "testuser_706"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_413"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.271316"], ["updated_at", "2025-07-22 05:06:54.271316"], ["username", "testuser_413"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_710"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.275904"], ["updated_at", "2025-07-22 05:06:54.275904"], ["username", "testuser_710"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:06:54.278334"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:06:54.278930"], ["updated_at", "2025-07-22 05:06:54.278930"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:06:54.283713"], ["updated_at", "2025-07-22 05:06:54.283713"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:06:54 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 65], [nil, 65], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 65], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 65], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 65]]
  Rendered hub/index.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 1.5ms (9 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
HubFlowTest: test_hub_displays_user-specific_data
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_961"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.741793"], ["updated_at", "2025-07-22 05:07:09.741793"], ["username", "testuser_961"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_990"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.746283"], ["updated_at", "2025-07-22 05:07:09.746283"], ["username", "testuser_990"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:09.748187"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:07:09.755451"], ["updated_at", "2025-07-22 05:07:09.755451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.759813"], ["updated_at", "2025-07-22 05:07:09.759813"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 8ms (ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.1ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 68], [nil, 68], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 68], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 68], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 68]]
  Rendered hub/index.html.erb within layouts/application (Duration: 14.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 16.3ms | ActiveRecord: 6.2ms (9 queries, 1 cached) | GC: 1.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_583"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.886168"], ["updated_at", "2025-07-22 05:07:09.886168"], ["username", "testuser_583"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_397"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.890395"], ["updated_at", "2025-07-22 05:07:09.890395"], ["username", "testuser_397"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_379"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.909542"], ["updated_at", "2025-07-22 05:07:09.909542"], ["username", "testuser_379"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_418"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.913175"], ["updated_at", "2025-07-22 05:07:09.913175"], ["username", "testuser_418"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 73], [nil, 73], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 73], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 73], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 73]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 0.8ms (7 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_create_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_215"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.938371"], ["updated_at", "2025-07-22 05:07:09.938371"], ["username", "testuser_215"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_965"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.941600"], ["updated_at", "2025-07-22 05:07:09.941600"], ["username", "testuser_965"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:09.943684"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:07:09.944060"], ["updated_at", "2025-07-22 05:07:09.944060"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started POST "/events" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by EventsController#create as HTML
  Parameters: {"event"=>{"datetime"=>"2025-07-24 05:07:09 UTC", "event_type"=>"match", "location"=>"Away Ground", "notes"=>"Important match"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-24 05:07:09"], ["event_type", "match"], ["location", "Away Ground"], ["notes", "Important match"], ["created_at", "2025-07-22 05:07:09.960711"], ["updated_at", "2025-07-22 05:07:09.960711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 5ms (ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EventsControllerTest: test_regular_user_cannot_delete_event
-----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_259"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.969397"], ["updated_at", "2025-07-22 05:07:09.969397"], ["username", "testuser_259"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_910"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.972182"], ["updated_at", "2025-07-22 05:07:09.972182"], ["username", "testuser_910"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:09.972840"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:07:09.973055"], ["updated_at", "2025-07-22 05:07:09.973055"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started DELETE "/events/13" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by EventsController#destroy as HTML
  Parameters: {"id"=>"13"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_delete_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_786"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.985642"], ["updated_at", "2025-07-22 05:07:09.985642"], ["username", "testuser_786"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_308"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:09.989766"], ["updated_at", "2025-07-22 05:07:09.989766"], ["username", "testuser_308"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (1.3ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:09.992235"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:07:09.992611"], ["updated_at", "2025-07-22 05:07:09.992611"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started DELETE "/events/14" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by EventsController#destroy as HTML
  Parameters: {"id"=>"14"}
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Destroy (0.7ms)[0m  [1m[31mDELETE FROM "events" WHERE "events"."id" = $1[0m  [["id", 14]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 6ms (ActiveRecord: 1.9ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_update_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_197"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.015377"], ["updated_at", "2025-07-22 05:07:10.015377"], ["username", "testuser_197"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_841"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.019734"], ["updated_at", "2025-07-22 05:07:10.019734"], ["username", "testuser_841"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:10.020754"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:07:10.021042"], ["updated_at", "2025-07-22 05:07:10.021042"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/events/15" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by EventsController#update as HTML
  Parameters: {"event"=>{"event_type"=>"match", "location"=>"Updated Location", "notes"=>"Updated notes"}, "id"=>"15"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Update (0.4ms)[0m  [1m[33mUPDATE "events" SET "event_type" = $1, "location" = $2, "notes" = $3, "updated_at" = $4 WHERE "events"."id" = $5[0m  [["event_type", "match"], ["location", "Updated Location"], ["notes", "Updated notes"], ["updated_at", "2025-07-22 05:07:10.029901"], ["id", 15]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 5ms (ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EventsControllerTest: test_regular_user_cannot_create_event
-----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_686"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.036811"], ["updated_at", "2025-07-22 05:07:10.036811"], ["username", "testuser_686"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_805"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.040859"], ["updated_at", "2025-07-22 05:07:10.040859"], ["username", "testuser_805"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:10.042117"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:07:10.042579"], ["updated_at", "2025-07-22 05:07:10.042579"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started POST "/events" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by EventsController#create as HTML
  Parameters: {"event"=>{"datetime"=>"2025-07-24 05:07:10 UTC", "event_type"=>"match", "location"=>"Away Ground"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
HubControllerTest: test_hub_should_filter_out_current_user_from_roster
----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_961"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.062290"], ["updated_at", "2025-07-22 05:07:10.062290"], ["username", "testuser_961"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_990"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.065483"], ["updated_at", "2025-07-22 05:07:10.065483"], ["username", "testuser_990"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_583"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.068220"], ["updated_at", "2025-07-22 05:07:10.068220"], ["username", "testuser_583"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_397"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.070661"], ["updated_at", "2025-07-22 05:07:10.070661"], ["username", "testuser_397"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 85], [nil, 85], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 85], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 85], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 85]]
  Rendered hub/index.html.erb within layouts/application (Duration: 5.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 5.8ms | ActiveRecord: 1.2ms (7 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 85], [nil, 85], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 85], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 85], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 85]]
  Rendered hub/index.html.erb within layouts/application (Duration: 22.2ms | GC: 17.9ms)
  Rendered layout layouts/application.html.erb (Duration: 22.8ms | GC: 17.9ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 17.9ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
HubControllerTest: test_should_load_required_data_for_hub
---------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_379"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.120942"], ["updated_at", "2025-07-22 05:07:10.120942"], ["username", "testuser_379"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_418"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.124090"], ["updated_at", "2025-07-22 05:07:10.124090"], ["username", "testuser_418"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:07:10.125084"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:07:10.125377"], ["updated_at", "2025-07-22 05:07:10.125377"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_84"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.128058"], ["updated_at", "2025-07-22 05:07:10.128058"], ["username", "testuser_84"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.7ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 89], [nil, 89], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 89], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 89], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 89]]
  Rendered hub/index.html.erb within layouts/application (Duration: 9.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | GC: 0.4ms)
Completed 200 OK in 12ms (Views: 8.3ms | ActiveRecord: 2.1ms (9 queries, 1 cached) | GC: 0.4ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 89], [nil, 89], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 89], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 89], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 89]]
  Rendered hub/index.html.erb within layouts/application (Duration: 6.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.9ms | ActiveRecord: 0.1ms (9 queries, 9 cached) | GC: 0.8ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
HubControllerTest: test_should_redirect_to_login_when_not_authenticated
-----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_781"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.166755"], ["updated_at", "2025-07-22 05:07:10.166755"], ["username", "testuser_781"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_618"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.172702"], ["updated_at", "2025-07-22 05:07:10.172702"], ["username", "testuser_618"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubControllerTest: test_should_show_hub_when_authenticated
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_828"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.189188"], ["updated_at", "2025-07-22 05:07:10.189188"], ["username", "testuser_828"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_990"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:07:10.193298"], ["updated_at", "2025-07-22 05:07:10.193298"], ["username", "testuser_990"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.2ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 94], [nil, 94], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 94], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 94], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 94]]
  Rendered hub/index.html.erb within layouts/application (Duration: 8.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.2ms | ActiveRecord: 1.9ms (7 queries, 1 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:07:10 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 94], [nil, 94], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 94], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 94], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 94]]
  Rendered hub/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | GC: 0.3ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 0.1ms (7 queries, 7 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
UsersControllerTest: test_should_get_create
-------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
UsersControllerTest: test_should_get_update
-------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
UsersControllerTest: test_should_get_destroy
--------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
UsersControllerTest: test_should_get_show
-----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
FinancesControllerTest: test_should_get_dashboard
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
UsersControllerTest: test_should_get_create
-------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
UsersControllerTest: test_should_get_show
-----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
UsersControllerTest: test_should_get_destroy
--------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
UsersControllerTest: test_should_get_update
-------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubControllerTest: test_should_show_hub_when_authenticated
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_391"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.681048"], ["updated_at", "2025-07-22 05:11:11.681048"], ["username", "testuser_391"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_798"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.684449"], ["updated_at", "2025-07-22 05:11:11.684449"], ["username", "testuser_798"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 6ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.2ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 96], [nil, 96], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 96], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 96], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 96]]
  Rendered hub/index.html.erb within layouts/application (Duration: 13.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 14.7ms | ActiveRecord: 3.3ms (7 queries, 1 cached) | GC: 0.1ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 96], [nil, 96], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 96], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 96], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 96]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
HubControllerTest: test_hub_should_filter_out_current_user_from_roster
----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_79"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.741866"], ["updated_at", "2025-07-22 05:11:11.741866"], ["username", "testuser_79"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_446"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.744020"], ["updated_at", "2025-07-22 05:11:11.744020"], ["username", "testuser_446"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_825"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.746082"], ["updated_at", "2025-07-22 05:11:11.746082"], ["username", "testuser_825"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_449"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.748019"], ["updated_at", "2025-07-22 05:11:11.748019"], ["username", "testuser_449"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 17ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 14.8ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 98], [nil, 98], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 98], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 98], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 98]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.4ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.7ms (7 queries, 1 cached) | GC: 0.4ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 98], [nil, 98], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 98], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 98], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 98]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.4ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms (7 queries, 7 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
HubControllerTest: test_should_load_required_data_for_hub
---------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_600"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.781271"], ["updated_at", "2025-07-22 05:11:11.781271"], ["username", "testuser_600"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_623"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.783473"], ["updated_at", "2025-07-22 05:11:11.783473"], ["username", "testuser_623"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.784045"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:11:11.784432"], ["updated_at", "2025-07-22 05:11:11.784432"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_289"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.786877"], ["updated_at", "2025-07-22 05:11:11.786877"], ["username", "testuser_289"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 102], [nil, 102], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 102], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 102], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 102]]
  Rendered hub/index.html.erb within layouts/application (Duration: 4.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.3ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.7ms (9 queries, 1 cached) | GC: 0.3ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mCACHE Finance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 102], [nil, 102], ["LIMIT", 10]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 102], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 102], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Event Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 102]]
  Rendered hub/index.html.erb within layouts/application (Duration: 2.7ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.3ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms (9 queries, 9 cached) | GC: 0.5ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
HubControllerTest: test_should_redirect_to_login_when_not_authenticated
-----------------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_157"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.805295"], ["updated_at", "2025-07-22 05:11:11.805295"], ["username", "testuser_157"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_409"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.808045"], ["updated_at", "2025-07-22 05:11:11.808045"], ["username", "testuser_409"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EventsControllerTest: test_regular_user_cannot_create_event
-----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_815"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.813476"], ["updated_at", "2025-07-22 05:11:11.813476"], ["username", "testuser_815"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_381"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.815441"], ["updated_at", "2025-07-22 05:11:11.815441"], ["username", "testuser_381"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.815920"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:11:11.816093"], ["updated_at", "2025-07-22 05:11:11.816093"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started POST "/events" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by EventsController#create as HTML
  Parameters: {"event"=>{"datetime"=>"2025-07-24 05:11:11 UTC", "event_type"=>"match", "location"=>"Away Ground"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_create_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_614"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.826996"], ["updated_at", "2025-07-22 05:11:11.826996"], ["username", "testuser_614"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_582"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.829341"], ["updated_at", "2025-07-22 05:11:11.829341"], ["username", "testuser_582"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.829932"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:11:11.830132"], ["updated_at", "2025-07-22 05:11:11.830132"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started POST "/events" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by EventsController#create as HTML
  Parameters: {"event"=>{"datetime"=>"2025-07-24 05:11:11 UTC", "event_type"=>"match", "location"=>"Away Ground", "notes"=>"Important match"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-24 05:11:11"], ["event_type", "match"], ["location", "Away Ground"], ["notes", "Important match"], ["created_at", "2025-07-22 05:11:11.835225"], ["updated_at", "2025-07-22 05:11:11.835225"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EventsControllerTest: test_regular_user_cannot_delete_event
-----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_528"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.840077"], ["updated_at", "2025-07-22 05:11:11.840077"], ["username", "testuser_528"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_922"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.842131"], ["updated_at", "2025-07-22 05:11:11.842131"], ["username", "testuser_922"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.842656"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:11:11.842822"], ["updated_at", "2025-07-22 05:11:11.842822"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started DELETE "/events/22" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by EventsController#destroy as HTML
  Parameters: {"id"=>"22"}
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_update_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_830"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.866194"], ["updated_at", "2025-07-22 05:11:11.866194"], ["username", "testuser_830"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_494"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.868586"], ["updated_at", "2025-07-22 05:11:11.868586"], ["username", "testuser_494"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.869162"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:11:11.869348"], ["updated_at", "2025-07-22 05:11:11.869348"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/events/23" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by EventsController#update as HTML
  Parameters: {"event"=>{"event_type"=>"match", "location"=>"Updated Location", "notes"=>"Updated notes"}, "id"=>"23"}
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Update (0.3ms)[0m  [1m[33mUPDATE "events" SET "event_type" = $1, "location" = $2, "notes" = $3, "updated_at" = $4 WHERE "events"."id" = $5[0m  [["event_type", "match"], ["location", "Updated Location"], ["notes", "Updated notes"], ["updated_at", "2025-07-22 05:11:11.875483"], ["id", 23]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EventsControllerTest: test_admin_can_delete_event
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_553"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.880352"], ["updated_at", "2025-07-22 05:11:11.880352"], ["username", "testuser_553"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_680"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.882440"], ["updated_at", "2025-07-22 05:11:11.882440"], ["username", "testuser_680"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.882993"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Test event"], ["created_at", "2025-07-22 05:11:11.883156"], ["updated_at", "2025-07-22 05:11:11.883156"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
Started DELETE "/events/24" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by EventsController#destroy as HTML
  Parameters: {"id"=>"24"}
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 115], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Destroy (0.2ms)[0m  [1m[31mDELETE FROM "events" WHERE "events"."id" = $1[0m  [["id", 24]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/hub
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mEvent Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "events"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
FinancesControllerTest: test_should_get_dashboard
-------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
HubFlowTest: test_hub_displays_users_data
-----------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_778"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.896663"], ["updated_at", "2025-07-22 05:11:11.896663"], ["username", "testuser_778"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_321"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.898901"], ["updated_at", "2025-07-22 05:11:11.898901"], ["username", "testuser_321"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 05:11:11.899459"], ["event_type", "training"], ["location", "Stadium"], ["notes", nil], ["created_at", "2025-07-22 05:11:11.899789"], ["updated_at", "2025-07-22 05:11:11.899789"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "otherplayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.901772"], ["updated_at", "2025-07-22 05:11:11.901772"], ["username", "otherplayer"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 117], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 117], [nil, 117], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 117], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 117], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."datetime" ASC[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 117]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.8ms (9 queries, 1 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
HubFlowTest: test_unauthenticated_user_redirected_to_login
----------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_815"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.916495"], ["updated_at", "2025-07-22 05:11:11.916495"], ["username", "testuser_815"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_381"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.919184"], ["updated_at", "2025-07-22 05:11:11.919184"], ["username", "testuser_381"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
HubFlowTest: test_user_login_redirects_to_hub
---------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_614"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.929682"], ["updated_at", "2025-07-22 05:11:11.929682"], ["username", "testuser_614"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_582"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 05:11:11.931913"], ["updated_at", "2025-07-22 05:11:11.931913"], ["username", "testuser_582"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:11:11 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 122], [nil, 122], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 122], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 ORDER BY "users"."username" ASC LIMIT $3[0m  [["id", 122], ["username", "Admin"], ["LIMIT", 5]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 122]]
  Rendered hub/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.4ms (7 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
HubControllerTest: test_hub_redirects_to_login_when_not_logged_in
-----------------------------------------------------------------
[dotenv] Saved a snapshot of [32mENV[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 08:46:37 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 21ms (ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 2.7ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_56"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:22:05.102078"], ["updated_at", "2025-07-22 06:22:05.102078"], ["username", "testuser_56"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "other"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_10"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:22:05.127638"], ["updated_at", "2025-07-22 06:22:05.127638"], ["username", "testuser_10"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_980"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:22:05.134328"], ["updated_at", "2025-07-22 06:22:05.134328"], ["username", "testuser_980"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"newuser"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "newuser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:23.756434"], ["updated_at", "2025-07-22 06:50:23.756434"], ["username", "newuser"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", nil], ["chain", nil], ["car", false], ["location", nil], ["balance", "-100.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 45ms (ActiveRecord: 7.4ms (4 queries, 0 cached) | GC: 27.2ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"newuser"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "newuser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:23.773714"], ["updated_at", "2025-07-22 06:50:23.773714"], ["username", "newuser"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", nil], ["chain", nil], ["car", false], ["location", nil], ["balance", "-100.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.5ms (4 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_26"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:23.778088"], ["updated_at", "2025-07-22 06:50:23.778088"], ["username", "testuser_26"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFinance Create (1.4ms)[0m  [1m[32mINSERT INTO "finances" ("user_id", "amount", "notes", "transaction_type", "created_at", "updated_at", "payer_id", "payee_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["user_id", 129], ["amount", "25.0"], ["notes", "Test transaction"], ["transaction_type", "payment"], ["created_at", "2025-07-22 06:50:23.790408"], ["updated_at", "2025-07-22 06:50:23.790408"], ["payer_id", nil], ["payee_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_495"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:26.445357"], ["updated_at", "2025-07-22 06:50:26.445357"], ["username", "testuser_495"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_521"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:27.784627"], ["updated_at", "2025-07-22 06:50:27.784627"], ["username", "testuser_521"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://test.host/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_925"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:27.806690"], ["updated_at", "2025-07-22 06:50:27.806690"], ["username", "testuser_925"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2025-07-22 09:50:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/hub
Completed 302 Found in 3ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/hub" for 127.0.0.1 at 2025-07-22 09:50:27 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering hub/index.html.erb within layouts/application
  [1m[36mEvent Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances" WHERE (payer_id = $1 OR payee_id = $2) ORDER BY "finances"."created_at" DESC LIMIT $3[0m  [[nil, 132], [nil, 132], ["LIMIT", 10]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 132], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mCACHE Event Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "events" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."id" != $1 AND "users"."username" != $2 LIMIT $3[0m  [["id", 132], ["username", "Admin"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1 ORDER BY "users"."username" ASC[0m  [["id", 132]]
  Rendered hub/index.html.erb within layouts/application (Duration: 10.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 12.7ms | ActiveRecord: 2.8ms (7 queries, 2 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/hub" for 127.0.0.1 at 2025-07-22 09:50:27 +0300
Processing by HubController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_642"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:27.845249"], ["updated_at", "2025-07-22 06:50:27.845249"], ["username", "testuser_642"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_475"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:27.855651"], ["updated_at", "2025-07-22 06:50:27.855651"], ["username", "testuser_475"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testadmin_156"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:27.863122"], ["updated_at", "2025-07-22 06:50:27.863122"], ["username", "testadmin_156"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "admin"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("datetime", "event_type", "location", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["datetime", "2025-07-23 06:50:27.870541"], ["event_type", "training"], ["location", "Stadium"], ["notes", "Bring boots"], ["created_at", "2025-07-22 06:50:27.870775"], ["updated_at", "2025-07-22 06:50:27.870775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.1ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_328"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:31.979619"], ["updated_at", "2025-07-22 06:50:31.979619"], ["username", "testuser_328"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.0ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_847"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 06:50:31.984861"], ["updated_at", "2025-07-22 06:50:31.984861"], ["username", "testuser_847"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (1.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.9ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.8ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.7ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:19:06 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 7.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:19:06 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (1.2ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:20:11 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.5ms)
Completed 200 OK in 10ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:20:11 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:22:18 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:22:18 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:23:21 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:23:21 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:24:14 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.5ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.6ms)
Completed 200 OK in 14ms (Views: 8.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:24:14 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.4ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:25:09 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 4.6ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | GC: 1.3ms)
Completed 200 OK in 27ms (Views: 15.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 2.3ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:25:09 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:26:28 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:26:28 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.7ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:26:48 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:26:48 +0300
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:28:24 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 7.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:28:25 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:28:31 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 2.4ms | ActiveRecord: 2.5ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:29:47 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 11.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:29:47 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:29:53 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 2.6ms | ActiveRecord: 3.8ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:31:04 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 7.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:31:04 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:31:10 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.2ms | ActiveRecord: 3.7ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.5ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:35:44 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 6.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:35:44 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:35:46 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 2.6ms | ActiveRecord: 3.6ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (1.1ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (1.6ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:37:03 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 6.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:37:03 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:37:06 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.4ms | ActiveRecord: 2.8ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:40:02 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:40:02 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:40:05 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 2.4ms | ActiveRecord: 3.5ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (0.7ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/" for 127.0.0.1 at 2025-07-22 10:42:41 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.9ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | GC: 0.7ms)
Completed 200 OK in 13ms (Views: 7.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.2ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:42:41 +0300
Started GET "/signup" for 127.0.0.1 at 2025-07-22 10:42:44 +0300
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 3.6ms | ActiveRecord: 3.7ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mDATABASE_USERNAME[0m, [36mDATABASE_PASSWORD[0m, [36mDATABASE_HOST[0m, and [36mDATABASE_PORT[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
  [1m[36mFinance Load (1.3ms)[0m  [1m[34mSELECT "finances".* FROM "finances"[0m
Started GET "/login" for 127.0.0.1 at 2025-07-22 10:54:49 +0300
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/application-31d9a16c.css" for 127.0.0.1 at 2025-07-22 10:54:49 +0300
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_871"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "username", "email", "password_digest", "access_level", "position", "chain", "car", "location", "balance") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["created_at", "2025-07-22 07:54:50.820250"], ["updated_at", "2025-07-22 07:54:50.820250"], ["username", "testuser_871"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["access_level", "player"], ["position", "Forward"], ["chain", nil], ["car", false], ["location", "City"], ["balance", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
